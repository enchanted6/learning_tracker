# 学习进度追踪系统

一个基于 Django 的智能学习管理平台，帮助用户科学高效地管理学习过程，集成课程管理、学习记录追踪、番茄工作法、智能复习计划以及 AI 助手等多种功能。

## 📋 目录

- [功能特性](#功能特性)
- [技术栈](#技术栈)
- [项目结构](#项目结构)
- [安装指南](#安装指南)
- [快速开始](#快速开始)
- [功能说明](#功能说明)
- [AI 助手使用](#ai-助手使用)
- [开发说明](#开发说明)
- [常见问题](#常见问题)

## ✨ 功能特性

### 核心功能

- **📚 课程管理**：创建、编辑、删除课程，记录课程信息
- **📝 学习记录管理**：记录每次学习的时间、时长，支持添加学习笔记
- **📄 学习资料管理**：管理各种类型的学习资料（文本、视频、音频、链接等）
- **🍅 番茄钟功能**：提供专注时间倒计时，帮助用户保持学习专注
- **📅 复习计划管理**：基于艾宾浩斯遗忘曲线算法自动生成科学的复习计划
- **💡 知识点管理**：记录和管理课程相关知识点
- **📊 数据统计与可视化**：提供学习时长统计、趋势分析、课程分布等图表
- **🤖 AI 智能助手**：支持自然语言对话，可以解析 PDF、导入学习记录、搜索课程等

### 特色功能

- **科学复习算法**：集成艾宾浩斯遗忘曲线算法，自动计算最佳复习时间
- **智能学习助手**：支持 PDF 文档解析、学习记录自动导入等功能
- **数据可视化**：通过图表直观展示学习状况和进度
- **性能优化**：使用 `select_related` 优化数据库查询，提升页面加载速度

## 🛠️ 技术栈

### 后端框架
- **Django 4.2.27**：Web 开发框架
- **SQLite**：轻量级数据库（开发环境）
- **Django ORM**：数据库操作

### AI 技术
- **LangChain 0.3.27**：AI 应用开发框架
- **OpenAI 兼容 API**：使用 ECNU 的 LLM API（ecnu-max 模型）
- **FAISS**：向量数据库，用于 PDF 文档检索
- **PyPDF**：PDF 文档解析

### 数据可视化
- **Matplotlib 3.10.8**：图表生成库

### 前端技术
- **Bootstrap 5.3.0**：UI 框架（本地文件）
- **HTML/CSS/JavaScript**：前端基础技术

## 📁 项目结构

```
learning_tracker/
├── learning_tracker/          # Django 项目配置
│   ├── settings.py            # 项目设置
│   ├── urls.py                # 主 URL 配置
│   └── static/                # 静态文件目录
│       ├── css/               # CSS 文件
│       │   ├── bootstrap.min.css
│       │   └── style.css
│       ├── js/                # JavaScript 文件
│       │   └── bootstrap.bundle.min.js
│       └── charts/            # 图表文件存储
├── tracker/                   # 主应用
│   ├── models.py              # 数据模型
│   ├── views.py               # 视图函数
│   ├── forms.py               # 表单定义
│   ├── urls.py                # URL 路由
│   ├── tools.py               # AI 工具定义
│   ├── utils/                 # 工具函数
│   │   └── forgetting_curve.py  # 遗忘曲线算法
│   └── templates/             # 模板文件
│       ├── base.html          # 基础模板
│       ├── base_for_test.html # 测试基础模板
│       ├── course/            # 课程相关模板
│       └── tracker/           # 其他功能模板
├── db.sqlite3                 # 数据库文件
├── manage.py                  # Django 管理脚本
└── requirements.txt           # 依赖列表
```

## 🚀 安装指南

### 环境要求

- Python 3.8 或更高版本
- pip（Python 包管理器）

### 安装步骤

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd learning_tracker
   ```

2. **创建虚拟环境（推荐）**
   ```bash
   python -m venv venv
   
   # Windows
   venv\Scripts\activate
   
   # Linux/Mac
   source venv/bin/activate
   ```

3. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

4. **配置环境变量**
   
   创建 `.env` 文件（可选，用于 AI 功能）：
   ```
   SCHOOL_LLM_API_KEY=你的API密钥
   ```
   
   或者在系统环境变量中设置 `SCHOOL_LLM_API_KEY`

5. **运行数据库迁移**
   ```bash
   cd learning_tracker
   python manage.py migrate
   ```

6. **创建超级用户（可选）**
   ```bash
   python manage.py createsuperuser
   ```

7. **启动开发服务器**
   ```bash
   python manage.py runserver
   ```

8. **访问应用**
   
   打开浏览器访问：http://127.0.0.1:8000/

## 🎯 快速开始

### 基本使用流程

1. **创建课程**
   - 访问"课程管理"页面
   - 点击"添加课程"
   - 输入课程名称和描述

2. **记录学习**
   - 访问"学习记录"页面
   - 点击"添加记录"
   - 选择课程，输入开始和结束时间
   - 系统自动计算学习时长

3. **使用番茄钟**
   - 访问"番茄钟"页面
   - 选择课程，设置专注时长
   - 开始计时，保持专注学习

4. **生成复习计划**
   - 访问"复习计划"页面
   - 点击"自动生成复习计划"
   - 选择课程，系统自动生成基于遗忘曲线的复习计划

5. **查看统计**
   - 访问"仪表板"页面
   - 查看学习时长统计、趋势图表等

## 📖 功能说明

### 课程管理

- 创建、编辑、删除课程
- 查看课程详情和总学习时长
- 支持课程描述信息

### 学习记录管理

- 记录每次学习的开始时间、结束时间
- 系统自动计算学习时长
- 支持添加学习笔记
- 支持按课程、日期范围筛选
- 可以关联到具体的学习资料

### 学习资料管理

- 支持多种资料类型：文本/文档、视频、音频、网页链接、其他
- 记录资料名称、描述、预计学习时长
- 自动统计实际学习时长

### 番茄钟功能

- 自定义专注时长（默认 25 分钟）和休息时长（默认 5 分钟）
- 实时倒计时显示
- 时间到达时自动提醒
- 完成后可选择创建学习记录

### 复习计划管理

基于艾宾浩斯遗忘曲线算法：

- **第 1 次复习**：学习后 1 天
- **第 2 次复习**：学习后 3 天
- **第 3 次复习**：学习后 7 天
- **第 4 次复习**：学习后 15 天
- **第 5 次复习**：学习后 30 天
- **之后**：每 30 天复习一次

支持自动生成复习计划，完成复习后自动生成下一次计划。

### 知识点管理

- 为每门课程创建知识点
- 记录知识点名称和详细描述
- 按课程组织知识点

### 数据统计与可视化

- **总体统计**：总学习记录数、总学习时长、今日学习时长
- **学习趋势图**：最近 30 天的学习时长趋势（折线图）
- **课程时间分布**：各课程学习时间占比（饼图）
- **课程排行榜**：学习时长 Top 5 的课程

## 🤖 AI 助手使用

### 功能说明

AI 智能助手支持以下功能：

1. **📝 导入学习记录**
   - 说"导入学习记录"、"添加学习记录"等
   - 提供课程名称、开始时间、结束时间
   - AI 会自动提取信息并创建学习记录

2. **📄 PDF 解析**
   - 上传 PDF 文档（最大 50MB）
   - 询问文档内容相关问题
   - AI 基于文档内容回答

3. **🔍 搜索课程**
   - 说"搜索课程"、"找课程"等
   - AI 会搜索并返回课程信息

4. **⏰ 获取时间**
   - 询问"现在几点了"、"当前时间"等
   - AI 会返回当前时间

### 使用示例

**导入学习记录：**
```
用户：导入学习记录：Python基础，2025-12-30 14:00到16:00
AI：✅ 学习记录已成功导入！
```

**PDF 问答：**
```
用户：这个PDF的主要内容是什么？
AI：[基于PDF内容回答]
```

**搜索课程：**
```
用户：搜索数学课程
AI：[返回相关课程列表]
```

## 🔧 开发说明

### 数据库模型关系

```
Course（课程）
  ├── StudyMaterial（学习资料）
  │   ├── StudySession（学习记录）可选关联
  │   └── ReviewSchedule（复习计划）可选关联
  ├── PomodoroSession（番茄钟）
  └── KnowledgePoint（知识点）
```

### 性能优化

- 使用 `select_related` 优化数据库查询，避免 N+1 问题
- Bootstrap 文件使用本地存储，不依赖 CDN
- 图表生成使用缓存机制（开发中）

### 代码组织

- **models.py**：数据模型定义
- **views.py**：视图函数和业务逻辑
- **forms.py**：表单定义
- **tools.py**：AI 工具定义
- **utils/forgetting_curve.py**：遗忘曲线算法实现

## ❓ 常见问题

### 1. 页面加载很慢？

**可能原因：**
- Bootstrap CDN 加载失败

**解决方案：**
- 确保已下载 Bootstrap 文件到 `static/css/` 和 `static/js/` 目录
- 检查 `base.html` 和 `base_for_test.html` 是否使用本地文件

### 2. AI 功能无法使用？

**可能原因：**
- 未配置 `SCHOOL_LLM_API_KEY` 环境变量

**解决方案：**
- 设置环境变量：`SCHOOL_LLM_API_KEY=你的API密钥`
- 或在 `.env` 文件中配置

### 3. 数据库迁移失败？

**解决方案：**
```bash
python manage.py makemigrations
python manage.py migrate
```

### 4. 静态文件无法加载？

**解决方案：**
- 确保 `learning_tracker/learning_tracker/urls.py` 中配置了静态文件路径
- 开发模式下，Django 会自动处理静态文件

### 5. PDF 上传失败？

**检查：**
- 文件大小是否超过 50MB
- 文件格式是否为 PDF
- 服务器是否有写入权限

## 📝 注意事项

- **文件大小限制**：PDF 文件上传不得超过 50MB
- **环境变量**：使用 AI 功能需要配置 `SCHOOL_LLM_API_KEY`
- **数据库**：开发环境使用 SQLite，生产环境建议使用 PostgreSQL 或 MySQL
- **静态文件**：Bootstrap 文件需要下载到本地 `static/` 目录

## 👥 贡献者

- 刘思扬

## 📄 许可证

本项目采用 MIT 许可证。

## 🔗 相关资源

- [Django 文档](https://docs.djangoproject.com/)
- [LangChain 文档](https://python.langchain.com/)
- [Bootstrap 文档](https://getbootstrap.com/docs/5.3/)

---

**最后更新**：2026年1月

